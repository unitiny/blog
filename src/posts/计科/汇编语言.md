---
icon: article
date: 2022-01-10
title: 汇编语言
category:
- 计科

tag:
- 汇编语言
---

## 学习

[网址](https://www.bilibili.com/video/BV1Rs411c7HG/?spm_id_from=333.337.search-card.all.click&vd_source=3ec975651088fba288a277c53f0bcc77)



## 知识

### cpu

![image-20221222103938371](./image-20221222103938371.png)



#### 与内存

cpu与内存通过三个总线进行交流，为地址线，数据线，控制线。

首先经过地址线指明要操作的位置，然后通过控制线执行具体的操作，再将结果通过数据线传入或传回



##### 工作原理

cs,ip指向的地址代表指令，ds,bx指向的地址代表数据

cpu先根据cs,ip合成地址，然后通过地址总线找到对应地址，读取出一个字，如8B07，然后通过数据总线写入cpu,cpu识别8B07,发现是指令mov ax,[bx]，于是放入指令缓冲寄存器，之后根据指令将ds:[bx]这个地址的数据放入ax寄存器中，完成了cpu运算，最后继续读取cs,ip。

![image-20230102211444328](./image-20230102211444328.png)

#### 寄存器

16位，存放两个字节

![image-20221222104259884](./image-20221222104259884.png)

![image-20221222104431667](./image-20221222104431667.png)

![image-20230102205552486](./image-20230102205552486.png)

 

#### 寻址

要先将段地址*16才加上偏移地址，一个段由于只有16位地址，因此最大为64KB 

![image-20221222110928106](./image-20221222110928106.png)

![image-20221222111131343](./image-20221222111131343.png)

![image-20230102210838263](./image-20230102210838263.png)



#### ax...

ax,通用寄存器，可存放数据

ah,al,分别是ax的高低位，如ax=3344h,ah=33h，al=44h

bx,存放段地址的偏移量

cx,存放循环次数

dx,通用寄存器

dh,hl,分别是ax的高低位,各为8位储存1个字节



#### CS,IP

代码段寄存器

CPU只认被CS:IP指向的内存单元的内容为指令

CS寄存器储存段地址，IP寄存器储存偏移地址

![image-20221222211805607](./image-20221222211805607.png)



#### DS,[bx]

DS 数据段寄存器

[0]为内存单元，bx为偏移量寄存器

![image-20221223094619549](./image-20221223094619549.png)

 ![image-20221227173653085](./image-20221227173653085.png)

![image-20221228100935382](./image-20221228100935382.png)



#### SS,SP

堆栈段寄存器

负责储存栈地址信息，也是段寄存器，必须通过寄存器来传输数据

![image-20221226104211402](./image-20221226104211402.png)



push时先将SP减2

![image-20221226104430811](./image-20221226104430811.png)



#### SI,DI

与bx功能相近 

![image-20221228102104860](./image-20221228102104860.png)



#### BP

![image-20230102205958060](./image-20230102205958060.png)

### 汇编指令

#### mov

相当=

汇编指令往往是一个族。比如mov指令，有movq，movl 等,movq作用是mov4个字节.

#### add

相当+=

#### sub

相当-=

#### jmp

jmp 1000:3 跳转到1003H的地址，相当于CS指向1000，IP指向3

![image-20221222105410756](./image-20221222105410756.png)

 

jmp short s

![image-20230104212818607](./image-20230104212818607.png)

![image-20230104212900787](./image-20230104212900787.png)

![image-20230104213538930](./image-20230104213538930.png) 



jmp near ptr s

![image-20230104214106302](./image-20230104214106302.png)



jmp far ptr s

![image-20230104214506299](./image-20230104214506299.png)



通过内存转移

![image-20230104214646892](./image-20230104214646892.png)

![image-20230104214814543](./image-20230104214814543.png)

![image-20230104215235661](./image-20230104215235661.png) 



#### jcxz

如果cx == 0,则短转移跳转

![image-20230105103856011](./image-20230105103856011.png)



#### push,pop

将寄存器中数据出入栈

![image-20221226105737711](./image-20221226105737711.png)



#### inc

inc bx 相当于bx++



#### loop

loop s 跳转到s标签，使用cx来规定循环次数

  

#### dw

dw 0123h,0456h 定义一些字

由于开始时bx为0，故0123h储存在偏移量为0的地址上，且占据了一个字的空间，于是0456h储存在2的地址上



#### and

and 与指令

如

mov ax, 0101

and ax,0110 ; ax与0110

则ax=0100



#### or

或指令

or ax,1010 



#### db

定义字符串（定义类都是伪指令）

db 'hello'



#### dd

double word 定义32位数据，占两个字

![image-20230102215921519](./image-20230102215921519.png)



#### div

![image-20230102214037246](./image-20230102214037246.png) 



![image-20230102215108350](./image-20230102215108350.png)

![image-20230102215631863](./image-20230102215631863.png)



#### dup

![image-20230102220529571](./image-20230102220529571.png)

![image-20230102220629000](./image-20230102220629000.png)



#### offset

![image-20230104212451645](./image-20230104212451645.png)



#### ret,retf

读取栈的数据赋值到cs,ip中

![image-20230112204852992](./image-20230112204852992.png)

![image-20230112205012220](./image-20230112205012220.png)



#### call

将cs,ip的值入栈

![image-20230112205247897](./image-20230112205247897.png)



call far ptr

![image-20230115202251589](./image-20230115202251589.png)

![image-20230115202258514](./image-20230115202258514.png)

![image-20230115202425667](./image-20230115202425667.png)

![image-20230115202825569](./image-20230115202825569.png)





### 安全空间

0:200 - 0:2FF

![image-20221227165114235](./image-20221227165114235.png)



### 字符数据

![image-20221227203818959](./image-20221227203818959.png)



### 数据位置

![image-20230102210430571](./image-20230102210430571.png)



## 注意

汇编中数据不能以字母开头，必须前置0