---
icon: article
date: 2022-01-10
title: 编译原理
category:
- 计科

tag:
- 编译原理
---

### 词法分析

读取代码，将字符流变成单词流

![image-20221103143752194](./image-20221103143752194.png)



用结构体记录信息，IF, LPAREN等关键字由于是已知的固定字符串，无需赋值*lexeme

![image-20221103143817101](./image-20221103143817101.png)



![image-20221103143954340](./image-20221103143954340.png)



#### 词法分析器

![image-20221103144333277](./image-20221103144333277.png)

![image-20221103145134561](./image-20221103145134561.png)





#### 识别比较符

![image-20221103145112753](./image-20221103145112753.png)





#### 识别关键字

例如识别if， 会从0状态转移到3状态，而不会走1、2状态![image-20221103145029587](./image-20221103145029587.png)



![image-20221103145259022](./image-20221103145259022.png)



#### 正则表达式

![image-20221103154243005](./image-20221103154243005.png)



#### 自动机

![image-20221103154318630](./image-20221103154318630.png)



DFA 确定的一条路， NFA有多种结果不确定的路线

![image-20221103154559391](./image-20221103154559391.png)



#### 自动转换

![image-20221103155049439](./image-20221103155049439.png)

![image-20221103155911477](./image-20221103155911477.png)



#### NFA => DFA

![image-20221103161112879](./image-20221103161112879.png)

![image-20221103162052113](./image-20221103162052113.png)



#### DFA最小化

![image-20221103163320073](./image-20221103163320073.png)

![image-20221103163919292](./image-20221103163919292.png)



#### 转移表

通过DFA转移表来识别字符串是否符合规则

转移表1为ACCEPT, 空为ERROR

会尽可能最长匹配

![image-20221103194042857](./image-20221103194042857.png)



#### 跳转表

![image-20221103195248595](./image-20221103195248595.png)



### 语法分析

#### 概念

##### 提取左公因子

![image-20221105183642919](./image-20221105183642919.png)



##### 推导

E -> n ，从左到右



##### 归约

n -> E， 从右到左





#### 上下文无关文法

![image-20221103201920182](./image-20221103201920182.png)

#### 自顶向下分析

判断gdw是否符合S这个文法

会回溯

![image-20221104193747982](./image-20221104193747982.png)



##### 递归向下分析

分治法

对文法推导只有终结符的情况

![image-20221104195004516](./image-20221104195004516.png)



对文法推导有几种非终结符的情况

E始终得出 T+T+T...+T这种情况，则开头先分析T,然后以+T为单位进行分析。

T的推导同理

![image-20221104195936085](./image-20221104195936085.png)



##### LL分析器

用自动生成器代替手动编码，自动生成语法分析器，得出分析表，再加上分析算法，便得出语法规则树。

故有First和Follow集计算概念

![image-20221104201803415](./image-20221104201803415.png)



##### First集

![image-20221105162730623](./image-20221105162730623.png)



##### Follow集

![image-20221105163021195](./image-20221105163021195.png)

![image-20221105163413100](./image-20221105163413100.png)



##### First_S集

若β1到βn都没有触发return,则代表走到了末尾，故并上Follow(N)

![image-20221105163821829](./image-20221105163821829.png)

![image-20221105164631868](./image-20221105164631868.png)



##### LL(1)分析器

![image-20221105182834513](./image-20221105182834513.png)

![image-20221105183848013](./image-20221105183848013.png)







#### 自底向下分析

![image-20221105183940274](./image-20221105183940274.png)

![image-20221105184736168](./image-20221105184736168.png)

![image-20221105191918221](./image-20221105191918221.png)





##### LR(0)分析表

![image-20221105190636496](./image-20221105190636496.png)



##### LR(0)算法

![image-20221105191203882](./image-20221105191203882.png)



##### 构造分析表算法

![image-20221105191551007](./image-20221105191551007.png)

![image-20221105191841577](./image-20221105191841577.png)



##### Yacc

![image-20221106194137194](./image-20221106194137194.png)

![image-20221106195031328](./image-20221106195031328.png)



#### 语法制导翻译

![image-20221121162101782](./image-20221121162101782.png)

![image-20221121163405628](./image-20221121163405628.png)



#### 语法分析树

![image-20221121165049667](./image-20221121165049667.png)

![image-20221121165301675](./image-20221121165301675.png)





![image-20221121165840081](./image-20221121165840081.png)



### 语义分析

最庞大且复杂的模块

#### 任务

![image-20221124183931983](./image-20221124183931983.png)



#### 类型检查算法

![image-20221124191051371](./image-20221124191051371.png)



#### 类型检查算法

![image-20221124191717763](./image-20221124191717763.png)

![image-20221124191909396](./image-20221124191909396.png)

![image-20221124192214477](./image-20221124192214477.png)



#### 符号表

![image-20221124192642586](./image-20221124192642586.png)



#### 符号表处理作用域

![image-20221124193256184](./image-20221124193256184.png)

#### 符号表处理命名空间

![image-20221124194133953](./image-20221124194133953.png)



### 代码生成

![image-20221124195359711](./image-20221124195359711.png)



#### 给数据分配计算资源

![image-20221124195343984](./image-20221124195343984.png)





#### 栈式计算机

![image-20221124204152718](./image-20221124204152718.png)



分配到Memory中

![image-20221124204442415](./image-20221124204442415.png)



#### 递归下降代码生成算法

![image-20221124204716586](./image-20221124204716586.png)

![image-20221124204938717](./image-20221124204938717.png)



#### 寄存器计算机

![image-20221125152253965](./image-20221125152253965.png)

![image-20221125152814770](./image-20221125152814770.png)

![image-20221125153010928](./image-20221125153010928.png)

#### 三地址码

![image-20221125160926524](./image-20221125160926524.png)

![image-20221125161108210](./image-20221125161108210.png)

![image-20221125162202226](./image-20221125162202226.png)

![image-20221125162436793](./image-20221125162436793.png)

![image-20221125162745926](./image-20221125162745926.png)



#### 控制流图

方便分析三地址码的跳转，可以消除死代码块

![image-20221125163244526](./image-20221125163244526.png)

![image-20221125163418775](./image-20221125163418775.png)

![image-20221125165320846](./image-20221125165320846.png)



### 代码优化

![image-20221125170406309](./image-20221125170406309.png)



#### 数据流方程

重要

![image-20221125183922441](./image-20221125183922441.png)

![image-20221125184135133](./image-20221125184135133.png)

#### 寄存器分配

![image-20221125185351147](./image-20221125185351147.png)	



#### 优化路线

![image-20221125194508674](./image-20221125194508674.png)

#### 前端优化

![image-20221125194637321](./image-20221125194637321.png)

![image-20221125194839851](./image-20221125194839851.png)

![image-20221125195126625](D:\Typora\Markdown\计科\image-20221125195126625.png)